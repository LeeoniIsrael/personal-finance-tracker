<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {font-family: Arial;}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>
</head>
<body>

<h2>Coin:Flipper</h2>
<h3>Click on any of the following options to start</h3>
<div class="tab">
    <button class="tablinks" id="defaultOpen"><a href="/user_add">Add Transaction</a></button>
    <button class="tablinks" onclick="openCity(event, 'view')",><a href="/user_view">View Transactions</a></button>
    <button class="tablinks" onclick="openCity(event, 'exchange')"><a href="/user_convert">Currency Exchange</a></button>
</div>


  <h3>Add a new Transaction</h3>
  <form action='/user_add' method="post" id="dataForm" enctype="multipart/form-data">
    <label for="amount">Amount:*</label>
    <input type="number" step="0.01" id="amount" name="amount" required> <br>
    <label for="currency">Currency:*</label>
    <input type="text" id="currency" name="currency" required> <br>
    <label for="type">Type:*</label>
    <input type="text" id="type" name="type" required> <br>
    <label for="description">Notes:*</label>
    <input type="text" id="description" name="description" required> <br>
  <input type="button" onclick="convertToJson()" value="Submit">
    <input type="reset" value="Reset">
</form>


<script>
    function convertToJson() {
        let form = document.getElementById("dataForm");
        let formData = {};

        // Loop through form elements
        for (let i = 0; i < form.elements.length; i++) {
            let element = form.elements[i];

            // Skip submit button
            if (element.type !== "button" && element.type !== "submit") {
                formData[element.name] = element.value;
            }
            
        }

        // Convert formData object to JSON string
        let jsonData = JSON.stringify(formData, null, 2); // Using null, 2 for pretty printing
        let jsonOutput = document.getElementById("jsonOutput");

        // Display JSON string in a <pre> tag for clarity
        //jsonOutput.innerHTML = "<pre>" + jsonData + "</pre>";
        sendJsonToPython(formData);
    }
    function sendJsonToPython(data) {
        fetch('/user_add', {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
        })
            .then(response => response.json())
            .then(data => {
                console.log("Response from server:", data);
                // Handle response from server if needed
            })
            .catch(error => {
                console.error("Error:", error);
                // Handle errors if any
            });
    }
</script>


   
</body>
</html> 
